export const DEFAULT_MEMORY_TEMPLATE = {
  meta: {
    id: 'default-v1',
    name: '通用记忆模板',
    version: '1.0.0',
    author: '官方',
    description: '适用于常规角色扮演与日常聊天的基础记忆表格模板。',
    tags: ['通用', '角色扮演'],
  },
  tables: [
    {
      id: 'user_profile',
      name: '用户档案',
      scope: 'global',
      maxRows: 1,
      sourceData: {
        note: '记录用户基础档案，仅允许单行存在。',
        initNode: '初始化用户档案，填写已知基础信息。',
        insertNode: '仅允许初始化时插入一行。',
        updateNode: '用户信息变化时更新。',
        deleteNode: '禁止删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'nickname', name: '称呼', type: 'text' },
        { id: 'gender', name: '性别', type: 'select', options: ['男', '女', '未知'] },
        { id: 'personality', name: '性格（MBTI等）', type: 'multiline' },
        { id: 'likes', name: '喜好', type: 'multiline' },
        { id: 'notes', name: '其他信息', type: 'multiline' },
      ],
    },
    {
      id: 'character_profile',
      name: '角色档案',
      scope: 'contact',
      maxRows: 1,
      sourceData: {
        note: '记录角色档案信息。',
        initNode: '首次需要记录时插入一行。',
        insertNode: '新增档案时插入。',
        updateNode: '信息变化时更新。',
        deleteNode: '角色档案失效且明确不再需要时删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'personality', name: '性格（MBTI等）', type: 'multiline' },
        { id: 'likes', name: '喜好', type: 'multiline' },
        { id: 'taboos', name: '雷区/禁忌', type: 'multiline' },
        { id: 'notes', name: '其他信息', type: 'multiline' },
      ],
    },
    {
      id: 'important_people',
      name: '重要人物表',
      scope: 'group',
      sourceData: {
        note: '群聊专用：记录群内或剧情中出现的重要人物。每轮需判断该人物是否仍在场/可互动，更新“是否在场”。私聊不使用该表。',
        initNode: '群聊首次出现重要人物时插入。',
        insertNode: '新增重要人物时插入。',
        updateNode: '每轮更新“是否在场”，人物关系/状态/物品变化时补充更新。',
        deleteNode: '人物长期离场且无关时可删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'name', name: '姓名', type: 'text' },
        { id: 'age_gender', name: '性别/年龄', type: 'text' },
        { id: 'appearance', name: '外貌特征', type: 'multiline' },
        { id: 'items', name: '重要物品', type: 'multiline' },
        { id: 'present', name: '是否在场', type: 'select', options: ['是', '否'] },
        { id: 'notes', name: '过往经历/状态', type: 'multiline' },
      ],
    },
    {
      id: 'relationship',
      name: '关系记录',
      scope: 'contact',
      sourceData: {
        note: '记录与当前角色的关系与印象变化。',
        initNode: '首次对话时初始化关系记录。',
        insertNode: '新增重要关系条目。',
        updateNode: '关系变化时更新。',
        deleteNode: '关系条目失效时删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'relation', name: '关系', type: 'text' },
        { id: 'impression', name: '对方印象', type: 'multiline' },
        { id: 'names', name: '互相称呼', type: 'text' },
        { id: 'stage', name: '关系阶段', type: 'text' },
      ],
    },
    {
      id: 'events',
      name: '重要事件',
      scope: 'contact',
      sourceData: {
        note: '记录重要事件的时间、描述与影响。',
        initNode: '首次出现重大事件时插入。',
        insertNode: '新增重要事件记录。',
        updateNode: '事件信息补充或修正时更新。',
        deleteNode: '无效事件可删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'time', name: '时间', type: 'text' },
        { id: 'description', name: '事件描述', type: 'multiline' },
        { id: 'impact', name: '影响', type: 'multiline' },
        { id: 'importance', name: '重要程度', type: 'select', options: ['低', '中', '高', '极高'] },
      ],
    },
    {
      id: 'items',
      name: '重要物品',
      scope: 'contact',
      sourceData: {
        note: '记录重要物品的名称、描述与持有者。',
        initNode: '首次出现重要物品时插入。',
        insertNode: '新增重要物品记录。',
        updateNode: '物品信息变化时更新。',
        deleteNode: '物品失效或丢失时删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'name', name: '物品名', type: 'text' },
        { id: 'description', name: '描述', type: 'multiline' },
        { id: 'owner', name: '持有者', type: 'text' },
        { id: 'source', name: '来源', type: 'text' },
      ],
    },
    {
      id: 'group_consensus',
      name: '群聊共识',
      scope: 'group',
      sourceData: {
        note: '记录群聊中形成的共识与规则。',
        initNode: '首次形成共识时插入。',
        insertNode: '新增共识条目。',
        updateNode: '共识变化时更新。',
        deleteNode: '共识失效时删除。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'content', name: '共识内容', type: 'multiline' },
        { id: 'established_at', name: '确立时间', type: 'text' },
        { id: 'participants', name: '参与者', type: 'text' },
      ],
    },
    {
      id: 'chat_summary',
      name: '私聊摘要',
      scope: 'contact',
      sourceData: {
        note: '记录每次私聊后的摘要（合并“总结表 + 总体大纲”到同一栏位）。每次对话必须新增一行，禁止用 update 覆盖旧行。摘要栏位必须分隔，使用“【摘要】...【大总结】...”格式；按手机对话模式写纯文本，禁止输出 <details>/<summary> 等标签。仅记录该私聊内容，避免泄露群聊或其他角色的私密信息。',
        initNode: '首次对话后插入一条摘要。',
        insertNode: '每轮对话新增一条摘要（必须）。',
        updateNode: '禁止使用 update 覆盖旧摘要；如需修正请手动编辑。',
        deleteNode: '一般不删除，除非摘要明显错误或需要合并重写。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'time', name: '时间/轮次', type: 'text' },
        { id: 'summary', name: '摘要', type: 'multiline' },
      ],
    },
    {
      id: 'group_summary',
      name: '群聊摘要',
      scope: 'group',
      sourceData: {
        note: '记录群聊每次互动摘要（合并“总结表 + 总体大纲”到同一栏位）。每次对话必须新增一行，禁止用 update 覆盖旧行。摘要栏位必须分隔，使用“【摘要】...【大总结】...”格式；按手机对话模式写纯文本，禁止输出 <details>/<summary> 等标签。仅记录群聊公开信息，不包含成员私聊或敏感隐私。',
        initNode: '群聊首次互动后插入一条摘要。',
        insertNode: '每轮互动新增一条摘要（必须）。',
        updateNode: '禁止使用 update 覆盖旧摘要；如需修正请手动编辑。',
        deleteNode: '一般不删除，除非摘要明显错误或需要合并重写。',
      },
      updateConfig: {
        contextDepth: 6,
        updateFrequency: 1,
        batchSize: 20,
        skipFloors: 0,
      },
      exportConfig: {
        enabled: false,
        splitByRow: false,
        entryName: '',
        keywords: '',
        injectionTemplate: '',
      },
      columns: [
        { id: 'time', name: '时间/轮次', type: 'text' },
        { id: 'summary', name: '摘要', type: 'multiline' },
      ],
    },
  ],
  injection: {
    template: '{{tableData}}',
    position: 'after_persona',
    wrapper: '<memories>\n{{tableData}}\n</memories>',
  },
};
